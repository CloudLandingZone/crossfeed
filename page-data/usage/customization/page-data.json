{"componentChunkName":"component---src-templates-documentation-page-js","path":"/usage/customization/","result":{"data":{"markdownRemark":{"html":"<h3 id=\"creating-your-own-instance-of-crossfeed\" style=\"position:relative;\"><a href=\"#creating-your-own-instance-of-crossfeed\" aria-label=\"creating your own instance of crossfeed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating your own instance of Crossfeed</h3>\n<p>When you create your own instance of Crossfeed, you can customize many aspects of how it looks.</p>\n<p>The <code class=\"language-text\">dev.env.example</code> file contains a full list of all customizable variables.</p>\n<h3 id=\"user-agent-and-signing-requests\" style=\"position:relative;\"><a href=\"#user-agent-and-signing-requests\" aria-label=\"user agent and signing requests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Agent and signing requests</h3>\n<p>Crossfeed's workers, when performing requets, can optionally send a User Agent identifying the requestor as Crossfeed\nand a <code class=\"language-text\">Signature</code> header to verify that Crossfeed is performing the request.</p>\n<p>To do this, you can set the <code class=\"language-text\">WORKER_USER_AGENT</code>, the <code class=\"language-text\">WORKER_SIGNATURE_PUBLIC_KEY</code>, and the <code class=\"language-text\">WORKER_SIGNATURE_PRIVATE_KEY</code> parameters in your env file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">WORKER_USER_AGENT=&quot;Crossfeed (Test request from Crossfeed Staging Environment, for development use only. For more information, see https://github.com/cisagov/crossfeed)&quot;\nWORKER_SIGNATURE_PUBLIC_KEY=&quot;public key, can have newlines&quot;\nWORKER_SIGNATURE_PRIVATE_KEY=&quot;private key, can have newlines&quot;</code></pre></div>\n<h4 id=\"generating-rsa-keys\" style=\"position:relative;\"><a href=\"#generating-rsa-keys\" aria-label=\"generating rsa keys permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generating RSA keys</h4>\n<p>The public and private key values can be generated by running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh-keygen -m PEM -t rsa -f test_key\nssh-keygen -f test_key.pub -m <span class=\"token string\">'PEM'</span> -e <span class=\"token operator\">></span> test_key.pem</code></pre></div>\n<p>The public key is the value of <code class=\"language-text\">test_key.pem</code> and the private key is the value of <code class=\"language-text\">test_key</code>.</p>\n<h4 id=\"verifying-a-request\" style=\"position:relative;\"><a href=\"#verifying-a-request\" aria-label=\"verifying a request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verifying a request</h4>\n<p>One can then verify that requests are coming from Crossfeed by providing you with the following parts of the request:</p>\n<ul>\n<li>Value of the <code class=\"language-text\">Date</code> header</li>\n<li>Value of the <code class=\"language-text\">Signature</code> header</li>\n<li>Request method</li>\n<li>Request URL</li>\n</ul>\n<p>You can call the <code class=\"language-text\">SignRequests.verify_signature</code> method (found in <code class=\"language-text\">backend/worker/mitmproxy_sign_requests.py</code>) to verify a signature with\nthe above four parts of a request. Crossfeed will later have an admin UI that allows admins to run this check directly from the web interface.</p>\n<p>Note that when deploying Crossfeed to AWS, the worker signature public and private keys should also be set as SSM secrets (such as <code class=\"language-text\">/crossfeed/staging/WORKER_SIGNATURE_PUBLIC_KEY</code> and <code class=\"language-text\">/crossfeed/staging/WORKER_SIGNATURE_PRIVATE_KEY</code>).</p>","frontmatter":{"title":"Customization","sidenav":"user-guide"},"fields":{"slug":"/usage/customization/"},"headings":[{"value":"Creating your own instance of Crossfeed","depth":3},{"value":"User Agent and signing requests","depth":3},{"value":"Generating RSA keys","depth":4},{"value":"Verifying a request","depth":4}]}},"pageContext":{"name":"customization"}},"staticQueryHashes":["1824138477","561523179","63159454"]}